<!-- <!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>רשימת תרומות</title>
  <style>
    body {
      font-family: sans-serif;
      direction: rtl;
      background-color: #f5f5f5;
      padding: 2rem;
    }
    h1 {
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background-color: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 1rem;
      border: 1px solid #ddd;
      text-align: center;
    }
    th {
      background-color: #007bff;
      color: white;
    }
  </style>
</head>
<body>
  <h1>רשימת תרומות</h1>
  <table>
    <thead>
      <tr>
        <th>שם</th>
        <th>סכום</th>
        <th>תאריך</th>
      </tr>
    </thead>
    <tbody id="donationTable"></tbody>
  </table>

  <script>
    async function fetchDonations() {
      try {
        const res = await fetch("https://website-uyhs.onrender.com/gettrumot");
        const data = await res.json();

        const table = document.getElementById("donationTable");
        table.innerHTML = "";

        data.forEach(donation => {
          const row = document.createElement("tr");

          const name = document.createElement("td");
          name.textContent = donation.name;

          const amount = document.createElement("td");
          amount.textContent = donation.amount + 'ש"ח';

          const date = document.createElement("td");
          date.textContent = new Date(donation.date).toLocaleDateString("he-IL");

          row.appendChild(name);
          row.appendChild(amount);
          row.appendChild(date);
          table.appendChild(row);
        });
      } catch (err) {
        console.error("שגיאה בטעינת תרומות:", err);
      }
    }

    fetchDonations();
  </script>
</body>
</html> -->
<!doctype html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>תת קאש - ניהול תורמים</title>

    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Bootstrap RTL -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.rtl.min.css"
    />

    <!-- React and ReactDOM CDN -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Recharts for graphs -->
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
<!-- Recharts for graphs -->
    <style>
      /* Global Variables */
 
:root {
  --primary-color: #74a1a4;
  --primary-light: #305362;
  --secondary-color: #f72585;
  --success-color: #4cc9a4;
  --warning-color: #ff9e00;
  --danger-color: #e63946;
  --info-color: #48cae4;
  --dark-color: #212529;
  --light-gray: #f8f9fa;
  --medium-gray: #e9ecef;
 --border-radius: 10px;
  --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  --transition: all 0.3s ease;
}
      body {
        font-family: "Segoe UI", Tahoma, sans-serif;
        background-color: #f8f9fa;
        color: var(--text-dark);
      }
.card {
  border-radius: var(--border-radius);
  border: none;
  box-shadow: var(--box-shadow);
  transition: var(--transition);
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.card-header {
  border-radius: var(--border-radius) var(--border-radius) 0 0 !important;
  border-bottom: 1px solid var(--medium-gray);
  padding: 15px 20px;
}

.card-body {
  padding: 20px;
}

.card-footer {
  border-radius: 0 0 var(--border-radius) var(--border-radius) !important;
  background-color: white;
  border-top: 1px solid var(--medium-gray);
}.navbar {
  background: linear-gradient(45deg, var(--primary-color), var(--primary-light)) !important;
  box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
  padding: 12px 0;
}

.navbar-brand {
  font-weight: 700;
  font-size: 1.5rem;
  letter-spacing: 0.5px;
}

.nav-link {
  position: relative;
  font-weight: 500;
  padding: 8px 16px !important;
  transition: var(--transition);
}

.nav-link:after {
  content: '';
  position: absolute;
  width: 0;
  height: 2px;
  bottom: 2px;
  left: 50%;
  background-color: white;
  transition: all 0.3s ease;
  transform: translateX(-50%);
}

.nav-link.active:after,
.nav-link:hover:after {
  width: 60%;
}

.nav-link.active {
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 5px;
}.btn {
  border-radius: 6px;
  padding: 8px 16px;
  font-weight: 500;
  transition: var(--transition);
  border: none;
}

.btn-primary {
  background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
  box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
}

.btn-primary:hover {
  box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
  transform: translateY(-2px);
  background: linear-gradient(45deg, var(--primary-light), var(--primary-color));
}

.btn-success {
  background: linear-gradient(45deg, #2ecc71, var(--success-color));
  box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
}

.btn-success:hover {
  box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
  transform: translateY(-2px);
}

.btn-outline-primary {
  border: 1px solid var(--primary-color);
  color: var(--primary-color);
}

.btn-outline-primary:hover {
  background-color: var(--primary-color);
}

.action-btn {
  width: 32px;
  height: 32px;
  border-radius: 6px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
  margin: 0 3px;
}

.action-btn:hover {
  background-color: var(--light-gray);
  color: var(--primary-color);
}.table {
  border-collapse: separate;
  border-spacing: 0 5px;
}

.table thead th {
  border-bottom: none;
  font-weight: 600;
  color: var(--dark-color);
  padding: 12px;
}

.table tbody tr {
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  border-radius: var(--border-radius);
  transition: var(--transition);
}

.table tbody tr:hover {
  transform: scale(1.01);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
}

.table tbody td {
  padding: 12px;
  vertical-align: middle;
  border-top: none;
  background-color: white;
}

.table tbody td:first-child {
  border-radius: var(--border-radius) 0 0 var(--border-radius);
}

.table tbody td:last-child {
  border-radius: 0 var(--border-radius) var(--border-radius) 0;
}.donor-status {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  display: inline-block;
}

.donor-status.active {
  background-color: rgba(76, 201, 164, 0.15);
  color: var(--success-color);
}

.donor-status.potential {
  background-color: rgba(72, 202, 228, 0.15);
  color: var(--info-color);
}

.donor-status.inactive {
  background-color: rgba(158, 158, 158, 0.15);
  color: #9e9e9e;
}

.tag {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 20px;
  background: linear-gradient(45deg, #f1f3f9, #e6eaf3);
  color: var(--primary-color);
  font-size: 11px;
  margin-right: 5px;
  font-weight: 500;
  transition: var(--transition);
}

.tag:hover {
  background: linear-gradient(45deg, #e6eaf3, #d8dff0);
  transform: translateY(-1px);
}.card .card-body i.fa-2x {
  background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 2px 5px rgba(67, 97, 238, 0.3));
}

.card .card-body h3 {
  font-weight: 700;
  font-size: 2rem;
  margin: 10px 0;
  background: linear-gradient(45deg, #333, #666);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}input:focus, select:focus, textarea:focus {
  box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.25) !important;
  border-color: var(--primary-color) !important;
}

.form-control, .form-select {
  border-radius: 8px;
  padding: 10px 15px;
  border: 1px solid var(--medium-gray);
  transition: var(--transition);
}

.form-control:hover, .form-select:hover {
  border-color: var(--primary-color);
}

/* אנימציית כניסה למודאל */
.modal.show .modal-dialog {
  animation: modalFadeIn 0.3s ease-out forwards;
}

@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* שיפור הרקע של המודאל */
.modal-content {
  border: none;
  border-radius: var(--border-radius);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.modal-header {
  border-bottom: 1px solid var(--medium-gray);
  background-color: #f8f9fa;
  border-radius: var(--border-radius) var(--border-radius) 0 0;
}

.modal-footer {
  border-top: 1px solid var(--medium-gray);
  background-color: #f8f9fa;
  border-radius: 0 0 var(--border-radius) var(--border-radius);
}/* שיפור הפרופיל של התורם בתצוגה המורחבת */
.donor-preview .rounded-circle {
  background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
  color: white;
  box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
}

/* שיפור לשוניות */
.nav-tabs .nav-link {
  border: none;
  color: var(--dark-color);
  padding: 10px 15px;
  border-bottom: 2px solid transparent;
  border-radius: 0;
  transition: var(--transition);
}

.nav-tabs .nav-link.active {
  border-bottom: 2px solid var(--primary-color);
  color: var(--primary-color);
}

.nav-tabs .nav-link:hover:not(.active) {
  border-bottom: 2px solid #e6eaf3;
}

/* התאמות מובייל */
@media (max-width: 768px) {
  .card-title {
    font-size: 1rem;
  }
  
  .table td, .table th {
    padding: 0.5rem;
  }
  
  .action-btn {
    padding: 3px;
  }
  
  .donor-status, .tag {
    font-size: 10px;
    padding: 3px 6px;
  }
  
  .card .card-body h3 {
    font-size: 1.5rem;
  }
}

/* אפקט גלילה חלק */
html {
  scroll-behavior: smooth;
}
      /* Donor Status Styles */
      .donor-status {
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 600;
        display: inline-block;
      }

      .donor-status.active {
        background-color: rgba(76, 175, 80, 0.1);
        color: var(--success-color);
      }

      .donor-status.potential {
        background-color: rgba(33, 150, 243, 0.1);
        color: var(--info-color);
      }

      .donor-status.inactive {
        background-color: rgba(158, 158, 158, 0.1);
        color: var(--text-light);
      }

      /* Tag Styles */
      .tag {
        display: inline-block;
        padding: 3px 8px;
        border-radius: 15px;
        background-color: var(--light-gray);
        color: var(--text-light);
        font-size: 12px;
        margin-right: 5px;
      }

      /* Action Button Styles */
      .action-btn {
        color: var(--text-light);
        background: none;
        border: none;
        cursor: pointer;
        padding: 5px;
        font-size: 14px;
        transition: all 0.2s;
      }

      .action-btn:hover {
        color: var(--primary-color);
      }

      /* Task Indicators */
      .has-tasks-icon {
        color: var(--warning-color);
        margin-right: 3px;
      }

      .badge-task {
        font-size: 11px;
        font-weight: normal;
        padding: 3px 6px;
      }

      .badge-high {
        background-color: rgba(244, 67, 54, 0.1);
        color: var(--danger-color);
      }

      .badge-medium {
        background-color: rgba(255, 152, 0, 0.1);
        color: var(--warning-color);
      }

      .badge-low {
        background-color: rgba(76, 175, 80, 0.1);
        color: var(--success-color);
      }

      /* Navigation Styles */
      .nav-link.active {
        color: var(--primary-color) !important;
        font-weight: 600;
      }

      /* Page Title */
      .page-title {
        font-weight: 700;
        margin-bottom: 20px;
        color: var(--primary-color);
      }

      /* Modal Backdrop */
      .modal-backdrop {
        background-color: rgba(0, 0, 0, 0.5);
      }

      /* Timeline Styles */
      .timeline-item {
        position: relative;
      }

      .timeline-icon {
        min-width: 40px;
        text-align: center;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .card-title {
          font-size: 1rem;
        }

        .table td,
        .table th {
          padding: 0.5rem;
        }

        .action-btn {
          padding: 3px;
        }
      }

      /* Donor Preview */
      .donor-preview {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease;
      }

      .donor-preview.expanded {
        max-height: 1000px;
      }
    </style>
  </head>
  <body>
    <!-- Root element for React app -->
    <div id="root"></div>

    <!-- React component script -->
    <script type="text/babel">
              // Destructuring React components from Recharts
            // Destructuring React components from Recharts
let PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, LineChart, Line, ResponsiveContainer;

// נסה לייבא את Recharts ממקורות שונים
if (typeof window.Recharts !== 'undefined') {
  ({ PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, LineChart, Line, ResponsiveContainer } = window.Recharts);
} else {
  console.error('Recharts library not loaded correctly');
}              // Main donor management component
              const DonorManagementSystem = () => {
                  // State hooks
                  const [expandedDonor, setExpandedDonor] = React.useState(null);
                  const [activeTab, setActiveTab] = React.useState('info');
                  const [showGraphs, setShowGraphs] = React.useState(false);
                  const [showFilters, setShowFilters] = React.useState(true);
                  const [showAddDonorModal, setShowAddDonorModal] = React.useState(false);
                  const [showAddTaskModal, setShowAddTaskModal] = React.useState(false);
                  const [currentDonor, setCurrentDonor] = React.useState(null);

                  // Sample donor data
                  const donors = [
                      {
                          id: 1,
                          name: "דוד לוי",
                          created: "15/03/2024",
                          phone: "054-1234567",
                          email: "david@example.com",
                          lastAmount: 5000,
                          lastDate: "15/03/2025",
                          totalDonations: 18500,
                          status: "active",
                          agent: "דניאל כהן",
                          tags: ["תורם קבוע", "פורים"],
                          tasks: 2,
                          taskUrgency: "high",
                          area: "ירושלים"
                      },
                      {
                          id: 2,
                          name: "שרה כהן",
                          created: "10/01/2025",
                          phone: "050-9876543",
                          email: "sara@example.com",
                          lastAmount: 1200,
                          lastDate: "10/03/2025",
                          totalDonations: 4800,
                          status: "active",
                          agent: "יעל לוי",
                          tags: ["חודשי"],
                          tasks: 1,
                          taskUrgency: "medium",
                          area: "תל אביב"
                      },
                      {
                          id: 3,
                          name: "יוסף מזרחי",
                          created: "05/11/2024",
                          phone: "052-5551234",
                          email: "yosef@example.com",
                          lastAmount: 10000,
                          lastDate: "01/03/2025",
                          totalDonations: 25000,
                          status: "active",
                          agent: "אבי ישראלי",
                          tags: ["תורם גדול", "עסקים"],
                          tasks: 0,
                          taskUrgency: "",
                          area: "ירושלים"
                      },
                      {
                          id: 4,
                          name: "רחל גולדברג",
                          created: "20/02/2025",
                          phone: "053-7894561",
                          email: "rachel@example.com",
                          lastAmount: 0,
                          lastDate: "",
                          totalDonations: 0,
                          status: "potential",
                          agent: "דניאל כהן",
                          tags: ["חדש"],
                          tasks: 3,
                          taskUrgency: "high",
                          area: "באר שבע"
                      },
                      {
                          id: 5,
                          name: "משה ברוך",
                          created: "15/06/2024",
                          phone: "050-1112233",
                          email: "moshe@example.com",
                          lastAmount: 500,
                          lastDate: "10/01/2025",
                          totalDonations: 3200,
                          status: "inactive",
                          agent: "יעל לוי",
                          tags: [],
                          tasks: 0,
                          taskUrgency: "",
                          area: "חיפה"
                      }
                  ];

                  // Chart data
                  const statusChartData = [
                      { name: 'פעיל', value: 3 },
                      { name: 'פוטנציאלי', value: 1 },
                      { name: 'לא פעיל', value: 1 }
                  ];

                  const amountChartData = [
                      { name: '0-1000', range: '₪0-₪1,000', count: 1 },
                      { name: '1001-5000', range: '₪1,001-₪5,000', count: 2 },
                      { name: '5001-10000', range: '₪5,001-₪10,000', count: 1 },
                      { name: '10001+', range: '₪10,001+', count: 1 }
                  ];

                  const areaChartData = [
                      { name: 'ירושלים', count: 2 },
                      { name: 'תל אביב', count: 1 },
                      { name: 'חיפה', count: 1 },
                      { name: 'באר שבע', count: 1 }
                  ];

                  const timelineChartData = [
                      { name: 'ינואר', amount: 12000 },
                      { name: 'פברואר', amount: 15000 },
                      { name: 'מרץ', amount: 25000 },
                      { name: 'אפריל', amount: 18000 },
                      { name: 'מאי', amount: 22000 },
                      { name: 'יוני', amount: 19000 }
                  ];

                  const COLORS = ['#3f51b5', '#2196f3', '#9e9e9e'];

                  // Helper functions
                  const toggleDonorExpand = (donorId) => {
                      if (expandedDonor === donorId) {
                          setExpandedDonor(null);
                      } else {
                          setExpandedDonor(donorId);
                          setActiveTab('info');
                          setCurrentDonor(donors.find(d => d.id === donorId));
                      }
                  };

                  const formatCurrency = (amount) => {
                      if (!amount && amount !== 0) return "-";
                      return '₪' + amount.toLocaleString();
                  };

                  const getStatusDisplay = (status) => {
                      switch(status) {
                          case 'active':
                              return <span className="donor-status active">פעיל</span>;
                          case 'potential':
                              return <span className="donor-status potential">פוטנציאלי</span>;
                          case 'inactive':
                              return <span className="donor-status inactive">לא פעיל</span>;
                          default:
                              return null;
                      }
                  };

                  const getTaskBadge = (count, urgency) => {
                      if (!count || count === 0) return null;

                      let badgeClass = "";
                      switch(urgency) {
                          case 'high':
                              badgeClass = "badge-high";
                              break;
                          case 'medium':
                              badgeClass = "badge-medium";
                              break;
                          default:
                              badgeClass = "badge-low";
                              break;
                      }

                      return (
                          <React.Fragment>
                              <i className="fas fa-flag has-tasks-icon"></i>
                              <span className={`badge rounded-pill badge-task ${badgeClass}`}>{count}</span>
                          </React.Fragment>
                      );
                  };

                  const openAddTaskModal = (donorId) => {
                      setCurrentDonor(donors.find(d => d.id === donorId));
                      setShowAddTaskModal(true);
                  };

                  // JSX for the component
                  return (
                      <div className="donor-management-system">
                          {/* Header Navigation */}
                          <nav className="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
                              <div className="container-fluid">
                                  <a className="navbar-brand" href="#">
                                      <i className="fas fa-donate me-2"></i>
                                      תת קאש
                                  </a>
                                  <button className="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                                      <span className="navbar-toggler-icon"></span>
                                  </button>
                                  <div className="collapse navbar-collapse" id="navbarNav">
                                      <ul className="navbar-nav me-auto">
                                          <li className="nav-item">
                                              <a className="nav-link" href="#"><i className="fas fa-tachometer-alt me-1"></i> דשבורד</a>
                                          </li>
                                          <li className="nav-item">
                                              <a className="nav-link active" href="#"><i className="fas fa-users me-1"></i> תורמים</a>
                                          </li>
                                          <li className="nav-item">
                                              <a className="nav-link" href="#"><i className="fas fa-user-tie me-1"></i> סוכנים</a>
                                          </li>
                                          <li className="nav-item">
                                              <a className="nav-link" href="#"><i className="fas fa-bullhorn me-1"></i> קמפיינים</a>
                                          </li>
                                          <li className="nav-item">
                                              <a className="nav-link" href="#"><i className="fas fa-chart-bar me-1"></i> דוחות</a>
                                          </li>
                                          <li className="nav-item">
                                              <a className="nav-link" href="#"><i className="fas fa-cog me-1"></i> הגדרות</a>
                                          </li>
                                      </ul>
                                      <div className="d-flex">
                                          <div className="dropdown me-2">
                                              <button className="btn btn-outline-light dropdown-toggle" type="button">
                                                  <i className="fas fa-bell"></i>
                                                  <span className="badge rounded-pill bg-danger">3</span>
                                              </button>
                                          </div>
                                          <div className="dropdown">
                                              <button className="btn btn-outline-light dropdown-toggle" type="button">
                                                  <i className="fas fa-user-circle"></i>
                                                  <span className="ms-1">ישראל ישראלי</span>
                                              </button>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </nav>

                          {/* Main Content */}
                          <div className="container-fluid">
                              {/* Page header */}
                              <div className="row mb-4">
                                  <div className="col">
                                      <h1 className="page-title">
                                          <i className="fas fa-users me-2"></i> ניהול תורמים
                                      </h1>
                                  </div>
                              </div>

                              {/* Statistics Cards */}
                              <div className="row mb-4">
                                  <div className="col-lg-2 col-md-4 col-sm-6 mb-3">
                                      <div className="card h-100 border-0 shadow-sm">
                                          <div className="card-body text-center">
                                              <i className="fas fa-users fa-2x text-primary mb-3"></i>
                                              <h3 className="mb-2">2,543</h3>
                                              <p className="text-muted mb-0">סה"כ תורמים</p>
                                          </div>
                                      </div>
                                  </div>
                                  <div className="col-lg-2 col-md-4 col-sm-6 mb-3">
                                      <div className="card h-100 border-0 shadow-sm">
                                          <div className="card-body text-center">
                                              <i className="fas fa-user-plus fa-2x text-success mb-3"></i>
                                              <h3 className="mb-2">42</h3>
                                              <p className="text-muted mb-0">תורמים חדשים החודש</p>
                                          </div>
                                      </div>
                                  </div>
        <div className="col-lg-2 col-md-4 col-sm-6 mb-3">
                  <div className="card h-100 border-0 shadow-sm">
                    <div className="card-body text-center">
                      <i className="fas fa-shekel-sign fa-2x text-warning mb-3"></i>
                      <h3 className="mb-2">₪324,500</h3>
                      <p className="text-muted mb-0">סה"כ תרומות קמפיין</p>
                    </div>
                  </div>
                </div>
                <div className="col-lg-2 col-md-4 col-sm-6 mb-3">
                  <div className="card h-100 border-0 shadow-sm">
                    <div className="card-body text-center">
                      <i className="fas fa-chart-line fa-2x text-info mb-3"></i>
                      <h3 className="mb-2">₪1,250</h3>
                      <p className="text-muted mb-0">ממוצע תרומה</p>
                    </div>
                  </div>
                </div>
                <div className="col-lg-2 col-md-4 col-sm-6 mb-3">
                  <div className="card h-100 border-0 shadow-sm">
                    <div className="card-body text-center">
                      <i className="fas fa-tasks fa-2x text-warning mb-3"></i>
                      <h3 className="mb-2">28</h3>
                      <p className="text-muted mb-0">משימות פתוחות</p>
                    </div>
                  </div>
                </div>
                <div className="col-lg-2 col-md-4 col-sm-6 mb-3">
                  <div className="card h-100 border-0 shadow-sm">
                    <div className="card-body text-center">
                      <i className="fas fa-exclamation-triangle fa-2x text-danger mb-3"></i>
                      <h3 className="mb-2">12</h3>
                      <p className="text-muted mb-0">משימות באיחור</p>
                    </div>
                  </div>
                </div>                        </div>

              {/* אזור סינון */}
              <div className="card shadow-sm mb-4">
                <div className="card-header bg-white d-flex justify-content-between align-items-center">
                  <div>
                    <i className="fas fa-filter me-2"></i> סינון וחיפוש
                  </div>
                  <div>
                    <button
                      className="btn btn-sm btn-outline-secondary"
                      onClick={() => setShowFilters(!showFilters)}
                    >
                      <i className={`fas fa-angle-${showFilters ? 'up' : 'down'}`}></i> {showFilters ? 'הסתר' : 'הצג'}
                    </button>
                  </div>
                </div>
                {showFilters && (
                  <div className="card-body">
                    <div className="row g-3">
                      <div className="col-lg-4">
                        <div className="input-group">
                          <span className="input-group-text"><i className="fas fa-search"></i></span>
                          <input type="text" className="form-control" placeholder="חיפוש חופשי..." />
                        </div>
                      </div>
                      <div className="col-lg-2 col-md-4">
                        <select className="form-select">
                          <option>סטטוס</option>
                          <option>פעיל</option>
                          <option>פוטנציאלי</option>
                          <option>לא פעיל</option>
                        </select>
                      </div>
                      <div className="col-lg-2 col-md-4">
                        <select className="form-select">
                          <option>סוכן אחראי</option>
                          <option>דניאל כהן</option>
                          <option>יעל לוי</option>
                          <option>אבי ישראלי</option>
                        </select>
                      </div>
                      <div className="col-lg-2 col-md-4">
                        <select className="form-select">
                          <option>אזור גיאוגרפי</option>
                          <option>ירושלים</option>
                          <option>תל אביב</option>
                          <option>חיפה</option>
                          <option>באר שבע</option>
                        </select>
                      </div>
                      <div className="col-lg-2 col-md-4">
                        <select className="form-select">
                          <option>תגיות</option>
                          <option>תורם גדול</option>
                          <option>תורם חודשי</option>
                          <option>בוגר המוסד</option>
                        </select>
                      </div>
                      <div className="col-lg-3 col-md-6">
                        <div className="input-group">
                          <span className="input-group-text">סכום תרומה</span>
                          <input type="number" className="form-control" placeholder="מינימום" />
                          <input type="number" className="form-control" placeholder="מקסימום" />
                        </div>
                      </div>
                      <div className="col-lg-3 col-md-6">
                        <div className="input-group">
                          <span className="input-group-text">תאריך תרומה</span>
                          <input type="date" className="form-control" />
                        </div>
                      </div>
                      <div className="col-lg-2 col-md-4">
                        <select className="form-select">
                          <option>יש משימות פתוחות</option>
                          <option>כן</option>
                          <option>לא</option>
                        </select>
                      </div>
                      <div className="col-lg-4 col-md-12 d-flex justify-content-end">
                        <button type="button" className="btn btn-outline-danger me-2">
                          <i className="fas fa-times me-1"></i> נקה סינון
                        </button>
                        <button type="button" className="btn btn-outline-primary me-2">
                          <i className="fas fa-save me-1"></i> שמור סינון
                        </button>
                        <button type="submit" className="btn btn-primary">
                          <i className="fas fa-search me-1"></i> הפעל סינון
                        </button>
                      </div>
                    </div>
                  </div>
                )}
              </div>

              {/* אזור הגרפים - מתקפל */}
              <div className="card shadow-sm mb-4">
                <div className="card-header bg-white d-flex justify-content-between align-items-center">
                  <div>
                    <i className="fas fa-chart-pie me-2"></i> נתונים וגרפים
                  </div>
                  <div>
                    <button
                      className="btn btn-sm btn-outline-secondary"
                      onClick={() => setShowGraphs(!showGraphs)}
                    >
                      <i className={`fas fa-angle-${showGraphs ? 'up' : 'down'}`}></i> {showGraphs ? 'הסתר' : 'הצג'}
                    </button>
                  </div>
                </div>
                {showGraphs && (
                  <div className="card-body">
                    <div className="row">
                      <div className="col-md-6 mb-4">
                        <div className="card shadow-sm">
                          <div className="card-header bg-white">התפלגות תורמים לפי סטטוס</div>
                          <div className="card-body">
                            <div style={{ height: '250px' }}>
                              <ResponsiveContainer width="100%" height="100%">
                                <PieChart>
                                  <Pie
                                    data={statusChartData}
                                    cx="50%"
                                    cy="50%"
                                    labelLine={true}
                                    label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}
                                    outerRadius={80}
                                    fill="#8884d8"
                                    dataKey="value"
                                  >
                                    {statusChartData.map((entry, index) => (
                                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                                    ))}
                                  </Pie>
                                  <Tooltip />
                                  <Legend />
                                </PieChart>
                              </ResponsiveContainer>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div className="col-md-6 mb-4">
                        <div className="card shadow-sm">
                          <div className="card-header bg-white">התפלגות תרומות לפי סכום</div>
                          <div className="card-body">
                            <div style={{ height: '250px' }}>
                              <ResponsiveContainer width="100%" height="100%">
                                <BarChart
                                  data={amountChartData}
                                  margin={{ top: 20, right: 30, left: 20, bottom: 5 }}
                                >
                                  <CartesianGrid strokeDasharray="3 3" />
                                  <XAxis dataKey="range" />
                                  <YAxis />
                                  <Tooltip />
                                  <Legend />
                                  <Bar dataKey="count" name="מספר תורמים" fill="#3f51b5" />
                                </BarChart>
                              </ResponsiveContainer>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div className="col-md-6 mb-4">
                        <div className="card shadow-sm">
                          <div className="card-header bg-white">התפלגות תורמים לפי אזור גיאוגרפי</div>
                          <div className="card-body">
                            <div style={{ height: '250px' }}>
                              <ResponsiveContainer width="100%" height="100%">
                                <BarChart
                                  data={areaChartData}
                                  layout="vertical"
                                  margin={{ top: 20, right: 30, left: 40, bottom: 5 }}
                                >
                                  <CartesianGrid strokeDasharray="3 3" />
                                  <XAxis type="number" />
                                  <YAxis dataKey="name" type="category" />
                                  <Tooltip />
                                  <Legend />
                                  <Bar dataKey="count" name="מספר תורמים" fill="#2196f3" />
                                </BarChart>
                              </ResponsiveContainer>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div className="col-md-6 mb-4">
                        <div className="card shadow-sm">
                          <div className="card-header bg-white">תרומות לאורך זמן</div>
                          <div className="card-body">
                            <div style={{ height: '250px' }}>
                              <ResponsiveContainer width="100%" height="100%">
                                <LineChart
                                  data={timelineChartData}
                                  margin={{ top: 20, right: 30, left: 20, bottom: 5 }}
                                >
                                  <CartesianGrid strokeDasharray="3 3" />
                                  <XAxis dataKey="name" />
                                  <YAxis />
                                  <Tooltip formatter={(value) => [`₪${value.toLocaleString()}`, 'סכום']} />
                                  <Legend />
                                  <Line type="monotone" dataKey="amount" name="סכום תרומות" stroke="#ff9800" strokeWidth={2} />
                                </LineChart>
                              </ResponsiveContainer>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}
              </div>

                               {/* טבלת תורמים */}
              <div className="card shadow-sm">
                <div className="card-header bg-white d-flex justify-content-between align-items-center">
                  <div>
                    <i className="fas fa-list me-2"></i> רשימת תורמים
                  </div>
                  <div>
                    <button
                      className="btn btn-sm btn-success me-2"
                      onClick={() => setShowAddDonorModal(true)}
                    >
                      <i className="fas fa-plus me-1"></i> תורם חדש
                    </button>
                    <button className="btn btn-sm btn-outline-primary me-2">
                      <i className="fas fa-file-import me-1"></i> ייבוא מאקסל
                    </button>
                    <button className="btn btn-sm btn-outline-secondary me-2">
                      <i className="fas fa-file-export me-1"></i> ייצוא לאקסל
                    </button>
                    <div className="btn-group">
                      <button className="btn btn-sm btn-outline-secondary dropdown-toggle">
                        <i className="fas fa-ellipsis-v"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div className="card-body p-0">
                  <div className="table-responsive">
                    <table className="table table-hover mb-0">
                      <thead className="table-light">
                        <tr>
                          <th scope="col" width="40">
                            <div className="form-check">
                              <input className="form-check-input" type="checkbox" />
                            </div>
                          </th>
                          <th scope="col">שם תורם</th>
                          <th scope="col">טלפון</th>
                          <th scope="col">אימייל</th>
                          <th scope="col">סכום אחרון</th>
                          <th scope="col">תאריך אחרון</th>
                          <th scope="col">סה"כ תרומות</th>
                          <th scope="col">סטטוס</th>
                          <th scope="col">סוכן</th>
                          <th scope="col">תגיות</th>
                          <th scope="col">משימות</th>
                          <th scope="col">אזור</th>
                          <th scope="col" width="130">פעולות</th>
                        </tr>
                      </thead>
                      <tbody>
                        {donors.map(donor => (
                          <React.Fragment key={donor.id}>
                            <tr>
                              <td>
                                <div className="form-check">
                                  <input className="form-check-input" type="checkbox" />
                                </div>
                              </td>
                              <td>
                                <div className="d-flex align-items-center">
                                  <div className="rounded-circle bg-light text-center me-2" style={{ width: '32px', height: '32px', lineHeight: '32px' }}>
                                    {donor.name.charAt(0)}
                                  </div>
                                  <div>
                                    <div>{donor.name}</div>
                                    <small className="text-muted">נוצר: {donor.created}</small>
                                  </div>
                                </div>
                              </td>
                              <td>{donor.phone}</td>
                              <td>{donor.email}</td>
                              <td>{formatCurrency(donor.lastAmount)}</td>
                              <td>{donor.lastDate || "-"}</td>
                              <td>{formatCurrency(donor.totalDonations)}</td>
                              <td>{getStatusDisplay(donor.status)}</td>
                              <td>{donor.agent}</td>
                              <td>
                                {donor.tags.map((tag, index) => (
                                  <span key={index} className="tag">{tag}</span>
                                ))}
                              </td>
                              <td>{getTaskBadge(donor.tasks, donor.taskUrgency)}</td>
                              <td>{donor.area}</td>
                              <td>
                                <button
                                  className="action-btn"
                                  title="צפייה מהירה"
                                  onClick={() => toggleDonorExpand(donor.id)}
                                >
                                  <i className="fas fa-eye"></i>
                                </button>
                                <button className="action-btn" title="ערוך">
                                  <i className="fas fa-edit"></i>
                                </button>
                                <button className="action-btn" title="הוסף תרומה">
                                  <i className="fas fa-plus-circle"></i>
                                </button>
                                <button
                                  className="action-btn"
                                  title="הוסף משימה"
                                  onClick={() => openAddTaskModal(donor.id)}
                                >
                                  <i className="fas fa-tasks"></i>
                                </button>
                                <button className="action-btn" title="שלח הודעה">
                                  <i className="fas fa-envelope"></i>
                                </button>
                              </td>
                            </tr>

                            {/* תצוגה מורחבת לתורם */}
                            {expandedDonor === donor.id && (
                              <tr>
                                <td colSpan="13">
                                  <div className="p-3 border-top">
                                    <div className="d-flex justify-content-between align-items-center mb-3">
                                      <h5 className="mb-0">{donor.name} - כרטיס תורם</h5>
                                      <button className="btn btn-sm btn-outline-primary">
                                        <i className="fas fa-external-link-alt me-1"></i> פתח כרטיס מלא
                                      </button>
                                    </div>

                                    <div className="row">
                                      <div className="col-md-3">
                                        <div className="card shadow-sm">
                                          <div className="card-body text-center">
                                            <div className="rounded-circle bg-light d-inline-flex align-items-center justify-content-center mb-3" style={{ width: '100px', height: '100px', fontSize: '40px' }}>
                                              {donor.name.charAt(0)}
                                            </div>

         <h5>{donor.name}</h5>
                                            <p className="text-muted mb-1">{donor.phone}</p>
                                            <p className="text-muted mb-3">{donor.email}</p>
                                            <div className="d-grid gap-2">
                                              <button className="btn btn-sm btn-primary">
                                                <i className="fas fa-plus-circle me-1"></i> הוסף תרומה
                                              </button>
                                              <button className="btn btn-sm btn-outline-primary">
                                                <i className="fas fa-envelope me-1"></i> שלח הודעה
                                              </button>
                                            </div>
                                          </div>
                                        </div>
                                      </div>

                                      <div className="col-md-9">
                                        {/* לשוניות מידע תורם */}
                                        <ul className="nav nav-tabs mb-3">
                                          <li className="nav-item">
                                            <a
                                              className={`nav-link ${activeTab === 'info' ? 'active' : ''}`}
                                              href="#"
                                              onClick={(e) => { e.preventDefault(); setActiveTab('info'); }}
                                            >
                                              פרטים אישיים
                                            </a>
                                          </li>
                                          <li className="nav-item">
                                            <a
                                              className={`nav-link ${activeTab === 'donations' ? 'active' : ''}`}
                                              href="#"
                                              onClick={(e) => { e.preventDefault(); setActiveTab('donations'); }}
                                            >
                                              היסטוריית תרומות
                                            </a>
                                          </li>
                                          <li className="nav-item">
                                            <a
                                              className={`nav-link ${activeTab === 'interactions' ? 'active' : ''}`}
                                              href="#"
                                              onClick={(e) => { e.preventDefault(); setActiveTab('interactions'); }}
                                            >
                                              אינטראקציות
                                            </a>
                                          </li>
                                          <li className="nav-item">
                                            <a
                                              className={`nav-link ${activeTab === 'tasks' ? 'active' : ''}`}
                                              href="#"
                                              onClick={(e) => { e.preventDefault(); setActiveTab('tasks'); }}
                                            >
                                              משימות
                                            </a>
                                          </li>
                                          <li className="nav-item">
                                            <a
                                              className={`nav-link ${activeTab === 'names' ? 'active' : ''}`}
                                              href="#"
                                              onClick={(e) => { e.preventDefault(); setActiveTab('names'); }}
                                            >
                                              שמות לברכה
                                            </a>
                                          </li>
                                          <li className="nav-item">
                                            <a
                                              className={`nav-link ${activeTab === 'activity' ? 'active' : ''}`}
                                              href="#"
                                              onClick={(e) => { e.preventDefault(); setActiveTab('activity'); }}
                                            >
                                              לוג פעילות
                                            </a>
                                          </li>
                                        </ul>

                                        {/* תוכן הלשוניות */}
                                        <div className="tab-content p-3 border rounded">
                                          {/* לשונית פרטים אישיים */}
                                          {activeTab === 'info' && (
                                            <div className="row">
                                              <div className="col-md-6">
                                                <p><strong>כתובת:</strong> רחוב הרצל 15, {donor.area}</p>
                                                <p><strong>טלפון נוסף:</strong> 02-6543210</p>
                                                <p><strong>ערוץ מועדף:</strong> WhatsApp</p>
                                                <p><strong>קשר למוסד:</strong> הורה לתלמיד</p>
                                              </div>
                                              <div className="col-md-6">
                                                <p><strong>תגיות:</strong>
                                                  {donor.tags.map((tag, index) => (
                                                    <span key={index} className="tag ms-1">{tag}</span>
                                                  ))}
                                                </p>
                                                <p><strong>סוכן אחראי:</strong> {donor.agent}</p>
                                                <p><strong>סטטוס:</strong> {donor.status === 'active' ? 'פעיל' :
                                                                       donor.status === 'potential' ? 'פוטנציאלי' : 'לא פעיל'}</p>
                                                <p><strong>הערות:</strong> מעדיף תרומות בפורים, מתעניין בפעילויות חדשות</p>
                                              </div>
                                            </div>
                                          )}

                                          {/* לשונית היסטוריית תרומות */}
                                          {activeTab === 'donations' && (
                                            <table className="table table-sm">
                                              <thead>
                                                <tr>
                                                  <th>תאריך</th>
                                                  <th>סכום</th>
                                                  <th>קמפיין</th>
                                                  <th>אמצעי תשלום</th>
                                                  <th>סוכן</th>
                                                </tr>
                                              </thead>
                                              <tbody>
                                                <tr>
                                                  <td>{donor.lastDate || "-"}</td>
                                                  <td>{formatCurrency(donor.lastAmount)}</td>
                                                  <td>מתנות לאביונים 2025</td>
                                                  <td>כרטיס אשראי</td>
                                                  <td>{donor.agent}</td>
                                                </tr>
                                                {donor.id === 1 && (
                                                  <>
                                                    <tr>
                                                      <td>05/09/2024</td>
                                                      <td>₪3,500</td>
                                                      <td>חגי תשרי</td>
                                                      <td>העברה בנקאית</td>
                                                      <td>{donor.agent}</td>
                                                    </tr>
                                                    <tr>
                                                      <td>17/03/2024</td>
                                                      <td>₪10,000</td>
                                                      <td>מתנות לאביונים 2024</td>
                                                      <td>צ'ק</td>
                                                      <td>יעל לוי</td>
                                                    </tr>
                                                  </>
                                                )}
                                              </tbody>
                                            </table>
                                          )}

                                          {/* לשונית אינטראקציות */}
                                          {activeTab === 'interactions' && (
                                            <>
                                              <div className="mb-3">
                                                <button className="btn btn-sm btn-primary">
                                                  <i className="fas fa-plus me-1"></i> תעד אינטראקציה חדשה
                                                </button>
                                              </div>
                                              <div className="mb-3 p-3 border rounded">
                                                <div className="d-flex justify-content-between">
                                                  <strong>שיחת טלפון - 10/03/2025</strong>
                                                  <span className="text-muted">{donor.agent}</span>
                                                </div>
                                                <p className="mb-0">
                                                  שוחחתי עם {donor.name.split(' ')[0]} לקראת פורים. הביע עניין בתרומה משמעותית השנה.
                                                  ביקש שאעדכן אותו על מספר הילדים שמשתתפים השנה.
                                                </p>
                                              </div>
                                              <div className="mb-3 p-3 border rounded">
                                                <div className="d-flex justify-content-between">
                                                  <strong>דוא"ל - 25/08/2024</strong>
                                                  <span className="text-muted">{donor.agent}</span>
                                                </div>
                                                <p className="mb-0">
                                                  נשלח מייל עם עדכון על פעילויות לקראת חגי תשרי. הגיב בחיוב.
                                                </p>
                                              </div>
                                            </>
                                          )}

                                          {/* לשונית משימות */}
                                          {activeTab === 'tasks' && (
                                            <>
                                              <div className="mb-3">
                                                <button
                                                  className="btn btn-sm btn-primary"
                                                  onClick={() => openAddTaskModal(donor.id)}
                                                >
                                                  <i className="fas fa-plus me-1"></i> הוסף משימה חדשה
                                                </button>
                                              </div>
                                              {donor.tasks > 0 ? (
                                                <div className="list-group">
                                                  <div className="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                                    <div className="me-auto">
                                                      <div className="d-flex w-100 justify-content-between">
                                                        <h6 className="mb-1">לשלוח נתונים על מספר המשתתפים</h6>
                                                        <small className="text-danger">באיחור (12/03/2025)</small>
                                                      </div>
                                                      <small className="text-muted">הקצה למשתמש: {donor.agent}</small>
                                                    </div>
                                                    <div className="btn-group">
                                                      <button className="btn btn-sm btn-outline-success">
                                                        <i className="fas fa-check"></i>
                                                      </button>
                                                      <button className="btn btn-sm btn-outline-primary">
                                                        <i className="fas fa-user-tag"></i>
                                                      </button>
                                                      <button className="btn btn-sm btn-outline-secondary">
                                                        <i className="fas fa-edit"></i>
                                                      </button>
                                                    </div>
                                                  </div>
                                                  {donor.tasks > 1 && (
                                                    <div className="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                                      <div className="me-auto">
                                                        <div className="d-flex w-100 justify-content-between">
                                                          <h6 className="mb-1">לתאם פגישה אישית</h6>
                                                          <small className="text-warning">25/03/2025</small>
                                                        </div>
                                                        <small className="text-muted">דחיפות: גבוהה</small>
                                                      </div>
                                                      <div className="btn-group">
                                                        <button className="btn btn-sm btn-outline-success">
                                                          <i className="fas fa-check"></i>
                                                        </button>
                                                        <button className="btn btn-sm btn-outline-primary">
                                                          <i className="fas fa-user-tag"></i>
                                                        </button>
                                                        <button className="btn btn-sm btn-outline-secondary">
                                                          <i className="fas fa-edit"></i>
                                                        </button>
                                                      </div>
                                                    </div>
                                                  )}
                                                </div>
                                              ) : (
                                                <div className="text-center p-4 text-muted">
                                                  <i className="fas fa-tasks fa-2x mb-3"></i>
                                                  <p>אין משימות פתוחות עבור תורם זה</p>
                                                </div>
                                              )}
                                            </>
                                          )}

                                          {/* לשונית שמות לברכה */}
                                          {activeTab === 'names' && (
                                            <>
                                              <div className="mb-3">
                                                <button className="btn btn-sm btn-primary">
                                                  <i className="fas fa-plus me-1"></i> הוסף שם לברכה
                                                </button>
                                              </div>
                                              <table className="table table-sm">
                                                <thead>
                                                  <tr>
                                                    <th>שם</th>
                                                    <th>סוג ברכה</th>
                                                    <th>תאריך הוספה</th>
                                                    <th>הערות</th>
                                                    <th>פעולות</th>
                                                  </tr>
                                                </thead>
                                                <tbody>
                                                  <tr>
                                                    <td>{donor.name.split(' ')[0]} בן שרה</td>
                                                    <td>לבריאות</td>
                                                    <td>10/01/2025</td>
                                                    <td>ניתוח מתוכנן בחודש אפריל</td>
                                                    <td>
                                                      <button className="btn btn-sm btn-outline-secondary">
                                                        <i className="fas fa-edit"></i>
                                                      </button>
                                                    </td>
                                                  </tr>
                                                  <tr>
                                                    <td>יעקב בן רחל</td>
                                                    <td>לפרנסה</td>
                                                    <td>15/02/2025</td>
                                                    <td>אב המשפחה</td>
                                                    <td>
                                                      <button className="btn btn-sm btn-outline-secondary">
                                                        <i className="fas fa-edit"></i>
                                                      </button>
                                                    </td>
                                                  </tr>
                                                </tbody>
                                              </table>
                                            </>
                                          )}

                                          {/* לשונית לוג פעילות */}
                                          {activeTab === 'activity' && (
                                            <div className="timeline">
                                              <div className="timeline-item mb-3">
                                                <div className="d-flex">
                                                  <div className="bg-primary text-white rounded-circle p-2 me-3" style={{ width: '40px', height: '40px', textAlign: 'center' }}>
                                                    <i className="fas fa-donate"></i>
                                                  </div>
                                                  <div className="p-2 border rounded flex-grow-1">
                                                    <div className="d-flex justify-content-between">
                                                      <strong>תרומה חדשה</strong>
                                                      <small className="text-muted">{donor.lastDate} 10:23</small>
                                                    </div>
                                                    <p className="mb-0">תרם {formatCurrency(donor.lastAmount)} בכרטיס אשראי לקמפיין "מתנות לאביונים 2025"</p>
                                                  </div>
                                                </div>
                                              </div>
                                              <div className="timeline-item mb-3">
                                                <div className="d-flex">
                                                  <div className="bg-info text-white rounded-circle p-2 me-3" style={{ width: '40px', height: '40px', textAlign: 'center' }}>
                                                    <i className="fas fa-phone"></i>
                                                  </div>
                                                  <div className="p-2 border rounded flex-grow-1">
                                                    <div className="d-flex justify-content-between">
                                                      <strong>שיחת טלפון</strong>
                                                      <small className="text-muted">10/03/2025 14:45</small>
                                                    </div>
                                                    <p className="mb-0">שיחה עם {donor.agent} - הביע עניין בתרומה לפורים</p>
                                                  </div>
                                                </div>
                                              </div>
                                              <div className="timeline-item mb-3">
                                                <div className="d-flex">
                                                  <div className="bg-warning text-white rounded-circle p-2 me-3" style={{ width: '40px', height: '40px', textAlign: 'center' }}>
                                                    <i className="fas fa-tasks"></i>
                                                  </div>
                                                  <div className="p-2 border rounded flex-grow-1">
                                                    <div className="d-flex justify-content-between">
                                                      <strong>משימה חדשה</strong>
                                                      <small className="text-muted">10/03/2025 15:30</small>
                                                    </div>
                                                    <p className="mb-0">נוצרה משימה: "לשלוח נתונים על מספר המשתתפים"</p>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          )}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            )}
                          </React.Fragment>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
                <div className="card-footer bg-white">
                  <div className="d-flex justify-content-between align-items-center">
                    <div>
                      <span className="text-muted">מציג 1-5 מתוך 156 תורמים</span>
                    </div>
                    <div>
                      <nav>
                        <ul className="pagination pagination-sm mb-0">
                          <li className="page-item disabled">
                            <a className="page-link" href="#">הקודם</a>
                          </li>
                          <li className="page-item active">
                            <a className="page-link" href="#">1</a>
                          </li>
                          <li className="page-item">
                            <a className="page-link" href="#">2</a>
                          </li>
                          <li className="page-item">
                            <a className="page-link" href="#">3</a>
                          </li>
                          <li className="page-item">
                            <a className="page-link" href="#">הבא</a>
                          </li>
                        </ul>
                      </nav>
                    </div>
                    <div>
                      <select className="form-select form-select-sm">
                        <option value="10">10 בדף</option>
                        <option value="25">25 בדף</option>
                        <option value="50" selected>50 בדף</option>
                        <option value="100">100 בדף</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
      {showAddDonorModal && (
              <div className="modal fade show" style={{ display: 'block', backgroundColor: 'rgba(0,0,0,0.5)' }}>
                <div className="modal-dialog modal-lg">
                  <div className="modal-content">
                    <div className="modal-header">
                      <h5 className="modal-title">הוספת תורם חדש</h5>
                      <button
                        type="button"
                        className="btn-close"
                        onClick={() => setShowAddDonorModal(false)}
                      ></button>
                    </div>
                    <div className="modal-body">
                      <form className="row g-3">
                        {/* מידע אישי */}
                        <div className="col-12">
                          <h6 className="border-bottom pb-2">פרטים אישיים</h6>
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">שם פרטי</label>
                          <input type="text" className="form-control" />
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">שם משפחה</label>
                          <input type="text" className="form-control" />
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">טלפון</label>
                          <input type="tel" className="form-control" />
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">טלפון נוסף</label>
                          <input type="tel" className="form-control" />
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">אימייל</label>
                          <input type="email" className="form-control" />
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">אזור גיאוגרפי</label>
                          <select className="form-select">
                            <option>בחר אזור...</option>
                            <option>ירושלים</option>
                            <option>תל אביב</option>
                            <option>חיפה</option>
                            <option>באר שבע</option>
                          </select>
                        </div>
                        <div className="col-12">
                          <label className="form-label">כתובת</label>
                          <input type="text" className="form-control" />
                        </div>

                        {/* העדפות תקשורת */}
                        <div className="col-12">
                          <h6 className="border-bottom pb-2 mt-3">העדפות תקשורת</h6>
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">ערוץ תקשורת מועדף</label>
                          <select className="form-select">
                            <option>טלפון</option>
                            <option>אימייל</option>
                            <option>SMS</option>
                            <option>WhatsApp</option>
                          </select>
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">זמן מועדף ליצירת קשר</label>
                          <select className="form-select">
                            <option>בוקר (8:00-12:00)</option>
                            <option>צהריים (12:00-16:00)</option>
                            <option>ערב (16:00-20:00)</option>
                          </select>
                        </div>
                        <div className="col-md-12">
                          <div className="form-check">
                            <input className="form-check-input" type="checkbox" id="agreeContact" />
                            <label className="form-check-label" htmlFor="agreeContact">
                              מסכים לקבל עדכונים ופניות בנושא תרומות
                            </label>
                          </div>
                        </div>

                        {/* מידע נוסף */}
                        <div className="col-12">
                          <h6 className="border-bottom pb-2 mt-3">פרטים נוספים</h6>
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">סטטוס</label>
                          <select className="form-select">
                            <option>פעיל</option>
                            <option>פוטנציאלי</option>
                            <option>לא פעיל</option>
                          </select>
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">סוכן אחראי</label>
                          <select className="form-select">
                            <option>דניאל כהן</option>
                            <option>יעל לוי</option>
                            <option>אבי ישראלי</option>
                          </select>
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">קשר למוסד</label>
                          <select className="form-select">
                            <option>הורה לתלמיד</option>
                            <option>בוגר</option>
                            <option>חבר הנהלה</option>
                            <option>אחר</option>
                          </select>
                        </div>
                        <div className="col-md-6">
                          <label className="form-label">תגיות</label>
                          <select className="form-select" multiple>
                            <option>תורם קבוע</option>
                            <option>תורם גדול</option>
                            <option>חודשי</option>
                            <option>פורים</option>
                            <option>פסח</option>
                            <option>ראש השנה</option>
                          </select>
                        </div>
                        <div className="col-12">
                          <label className="form-label">הערות</label>
                          <textarea className="form-control" rows="3"></textarea>
                        </div>

                        {/* שמות לברכה */}
                        <div className="col-12">
                          <h6 className="border-bottom pb-2 mt-3">שמות לברכה ותפילה</h6>
                        </div>
                        <div className="col-md-4">
                          <label className="form-label">שם לברכה</label>
                          <input type="text" className="form-control" />
                        </div>
                        <div className="col-md-4">
                          <label className="form-label">סוג ברכה</label>
                          <select className="form-select">
                            <option>לבריאות</option>
                            <option>לפרנסה</option>
                            <option>לזיווג</option>
                            <option>לילדים</option>
                            <option>להצלחה</option>
                          </select>
                        </div>
                        <div className="col-md-4">
                          <label className="form-label">תאריך אזכרה/יארצייט</label>
                          <input type="date" className="form-control" />
                        </div>
                      </form>
                    </div>
                    <div className="modal-footer">
                      <button
                        type="button"
                        className="btn btn-secondary"
                        onClick={() => setShowAddDonorModal(false)}
                      >
                        ביטול
                      </button>
                      <button type="button" className="btn btn-primary">שמור תורם</button>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* מודאל הוספת משימה */}
            {showAddTaskModal && (
              <div className="modal fade show" style={{ display: 'block', backgroundColor: 'rgba(0,0,0,0.5)' }}>
                <div className="modal-dialog">
                  <div className="modal-content">
                    <div className="modal-header">
                      <h5 className="modal-title">הוספת משימה חדשה</h5>
                      <button
                        type="button"
                        className="btn-close"
                        onClick={() => setShowAddTaskModal(false)}
                      ></button>
                    </div>
                    <div className="modal-body">
                      <form>
                        <div className="mb-3">
                          <label className="form-label">תוכן המשימה</label>
                          <textarea className="form-control" rows="3" required></textarea>
                        </div>
                        <div className="row mb-3">
                          <div className="col-md-6">
                            <label className="form-label">תורם קשור</label>
                            <select className="form-select" value={currentDonor ? currentDonor.id : ''}>
                              <option value="">בחר תורם...</option>
                              {donors.map(donor => (
                                <option key={donor.id} value={donor.id}>{donor.name}</option>
                              ))}
                            </select>
                          </div>
                          <div className="col-md-6">
                            <label className="form-label">תאריך לביצוע</label>
                            <input type="date" className="form-control" required />
                          </div>
                        </div>
                        <div className="row mb-3">
                          <div className="col-md-6">
                            <label className="form-label">דחיפות</label>
                            <select className="form-select" required>
                              <option>רגילה</option>
                              <option>בינונית</option>
                              <option>גבוהה</option>
                            </select>
                          </div>
                          <div className="col-md-6">
                            <label className="form-label">משתמש אחראי</label>
                            <select className="form-select" required>
                              <option>ישראל ישראלי (אני)</option>
                              <option>דניאל כהן</option>
                              <option>יעל לוי</option>
                              <option>אבי ישראלי</option>
                            </select>
                          </div>
                        </div>
                        <div className="mb-3">
                          <label className="form-label">תבניות נפוצות</label>
                          <select className="form-select mb-2">
                            <option value="">בחר תבנית...</option>
                            <option value="followup">מעקב לאחר שיחה</option>
                            <option value="donationReminder">תזכורת לתרומה</option>
                            <option value="birthday">ברכת יום הולדת</option>
                            <option value="meeting">תיאום פגישה</option>
                          </select>
                          </div>
                      </form>
                    </div>
                    <div className="modal-footer">
                      <button
                        type="button"
                        className="btn btn-secondary"
                        onClick={() => setShowAddTaskModal(false)}
                      >
                       ביטול
                </button>
                <button type="button" className="btn btn-primary">הוסף משימה</button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

// Render the React component to the DOM
ReactDOM.render(<DonorManagementSystem />, document.getElementById('root'));
    </script>

    <!-- Bootstrap JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
